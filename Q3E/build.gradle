apply plugin: 'com.android.library'

android {
    compileSdk 30
    buildToolsVersion '30.0.3'
    ndkVersion '23.2.8568313'
    //compileOptions.encoding "gbk"

    defaultConfig {
        minSdkVersion 16
        targetSdkVersion 30

        ndk {
            moduleName "q3eloader"
            abiFilters "armeabi-v7a", "arm64-v8a" /*, "armeabi", "x86", "x86_64"*/
        }
        externalNativeBuild {
            cmake {
                abiFilters "armeabi-v7a", "arm64-v8a" /*, "armeabi", "x86", "x86_64"*/
                arguments "-DANDROID_ARM_NEON=TRUE", "-DANDROID_TOOLCHAIN=clang", "-DANDROID_PLATFORM=android-21" /*, "-DANDROID_STL=c++_shared"*/
                cppFlags "-fexceptions", "-frtti"
            }
        }
        versionCode 1
        versionName '1.0.0harmattan2'
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
        }
        /*customDebugType {
            debuggable true
        }*/
    }
    sourceSets {
        main {
            jniLibs.srcDirs=['libs']
            //jni.srcDirs('src/main/jni')
            //jniLibs.srcDirs=[]
        }
    }
    externalNativeBuild {
        cmake {
            path "src/main/jni/CMakeLists.txt"
        }
        /*ndkBuild {
            path file('src/main/jni/Android.mk')
        }*/
    }
    lintOptions {
        checkReleaseBuilds false
        abortOnError false
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}

dependencies {
    //compile 'com.android.support:support-v4:18.+'
    implementation files('libs/ouya-sdk.jar')
    implementation files('libs/RootTools-2.4.jar')
}
